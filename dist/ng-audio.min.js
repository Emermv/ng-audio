/** 
* @license ng-audio - v0.0.1
* (c) 2013 Julien VALERY https://github.com/darul75/ng-slider
* License: MIT 
**/
!function(a){"use strict";function b(a,b,c){this.context=a,this.urlList=b,this.onload=c,this.bufferList=new Array,this.loadCount=0}a.module("ngAudio",[]).directive("audio",["$timeout",function(a){return{restrict:"AE",scope:{ngModel:"=",options:"="},template:'<div ng-click="play(0)" class="play_border" ng-show="loaded && !running"><div class="play_button"></div></div><div ng-click="stop(0)" class="play_border" ng-show="loaded && running"><div class="pause_button"></div></div>',link:function(c){c.play=function(a){c.running||(c.source=c.context.createBufferSource(),c.source.buffer=c.bufferList[a],c.source.connect(c.context.destination),c.source.loop=!0,c.source.start||(c.source.start=source.noteOn),c.source.start(0),c.running=!0)},c.stop=function(){c.running&&(c.source.stop||(c.source.stop=c.source.noteOff),c.source.stop(0),c.running=!1)},c.load=function(a){c.bufferLoader=new b(c.context,a,c.finishedLoading),c.bufferLoader.load()},c.finishedLoading=function(b){c.bufferList=b,a(function(){c.loaded=!0})},c.init=function(){try{var a=window.AudioContext||window.webkitAudioContext;c.context=new a,c.load(c.options.playlist)}catch(b){console.log("Web Audio API is not supported in this browser")}},c.init()}}}]),b.prototype.loadBuffer=function(a,b){var c=new XMLHttpRequest;"withCredentials"in c?c.open("GET",a,!0):"undefined"!=typeof XDomainRequest&&(c=new XDomainRequest,c.open(method,a)),c.open("GET",a,!0),c.responseType="arraybuffer";var d=this;c.onload=function(){d.context.decodeAudioData(c.response,function(c){return c?(d.bufferList[b]=c,void(++d.loadCount==d.urlList.length&&d.onload(d.bufferList))):void alert("error decoding file data: "+a)},function(a){console.error("decodeAudioData error",a)})},c.onerror=function(){alert("BufferLoader: XHR error")},c.send()},b.prototype.load=function(){for(var a=0;a<this.urlList.length;++a)this.loadBuffer(this.urlList[a],a)}}(angular);